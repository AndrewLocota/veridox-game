/* Reset and base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Global app font based on hero title stack */
:root {
  --app-font: "Inter", "Helvetica Neue", Arial, sans-serif;
  --image-card-y-nudge: -9vh; /* Relative upward nudge; adjust as needed */
  --image-card-shadow-offset: 1.2vh; /* Shadow trails slightly below */
}
body {
  font-family: var(--app-font);
}

/* Hide scroll bars during countdown */
body:has(.countdown-screen) {
  overflow: hidden;
}

.App {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Override App centering for countdown screen */
.App:has(.countdown-screen) {
  justify-content: flex-start;
  align-items: stretch;
}

/* Screen layouts */
.screen {
  width: 100%;
  max-width: 500px;
  margin: 0 auto;
  padding: 40px 20px;
  text-align: center;
}

/* Override screen defaults for countdown */
.countdown-screen.screen {
  max-width: none;
  margin: 0;
  padding: 0;
  text-align: left;
}

/* Veridox logo styles */
.veridox-logo {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 999;
  display: flex;
  align-items: center;
}

.veridox-logo img {
  height: 50px;
  width: auto;
  display: block; /* Ensure proper image display */
}

/* Ensure logo stays in top left for game screen */
.game-screen .veridox-logo {
  position: fixed !important;
  top: 10px !important;
  left: 10px !important;
  z-index: 999 !important;
  transform: none !important;
}

.game-stats {
  position: fixed;
  left: 66.67%; /* Position at the start of the third column */
  transform: translateX(-50%); /* Center in the third column */
  top: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  gap: 15px;
  font-weight: 500;
  text-align: center;
}

/* Preload screen */
.preload-screen .game-info h2 {
  font-size: 1.8rem;
  margin-bottom: 10px;
  color: #333;
}

.preload-screen .game-info h3 {
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 30px;
  color: #000;
}

.start-button {
  background: #007bff;
  color: white;
  border: none;
  padding: 15px 30px;
  font-size: 1.1rem;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}

.start-button:hover {
  background: #0056b3;
}

/* Countdown screen */
.countdown-screen {
  font-family: var(--app-font);
  min-height: 100vh;
  width: 100vw;
  padding: 0;
  margin: 0;
  display: flex;
  overflow: hidden;
}

.countdown-screen .countdown-content {
  display: flex;
  width: 100%;
}

.countdown-text-container {
  width: 50vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 0;
  margin: 0;
  position: relative;
  left: 0;
}

.countdown-text {
  font-size: 9rem;
  font-weight: 900;
  color: #000;
  line-height: 1.1;
  margin: 0;
  padding: 20px;
  text-align: left;
  white-space: pre-line;
  width: 100%;
  min-height: 300px;
  height: auto;
}
.countdown-textgen .fake-word {
  color: #ef4444;
}
/* TextGenerateEffect specific tweaks for countdown */
.countdown-textgen .textgen-word {
  font-size: inherit;
  font-weight: inherit;
  color: inherit;
  margin-right: 0.18em; /* slightly increase space between words */
}
.countdown-textgen .textgen-word:last-child {
  margin-right: 0;
}

.countdown-number-container {
  width: 50vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  right: 0;
}

.countdown-number {
  font-size: 9rem;
  font-weight: 900;
  background: linear-gradient(90deg, #8b5cf6, #a855f7, #c084fc);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.1;
  margin: 0;
  padding: 0;
}

.typing-word {
  opacity: 0;
  animation: typeIn 0.3s ease-out forwards;
  display: inline-block;
  min-width: 0.5rem;
}

.typing-word-placeholder {
  opacity: 0;
  display: inline-block;
  min-width: 0.5rem;
}

@keyframes typeIn {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Transition animations */
@keyframes flyOutLeft {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(-100vw);
    opacity: 0;
  }
}

@keyframes flyOutRight {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(100vw);
    opacity: 0;
  }
}

@keyframes gamePopIn {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(50px);
  }
  60% {
    transform: scale(1.1) translateY(-10px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Apply transition animations */
.countdown-text-container.fly-out-left {
  animation: flyOutLeft 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

.countdown-number-container.fly-out-right {
  animation: flyOutRight 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* Game screen entrance animation */
.game-screen {
  animation: gamePopIn 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

/* Keep logo in same position during transition */
.countdown-screen.transitioning .veridox-logo {
  position: fixed;
  z-index: 9999;
}

/* Game screen */
.game-screen {
  max-width: 600px;
  padding: 20px;
  font-family: var(--app-font);
}

.game-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid #eee;
}

.game-stats {
  display: flex;
  gap: 20px;
  font-weight: 500;
}

/* EDIT HERE FOR GAME SCREEN TEXT SIZES */
.game-content h2 {
  font-size: 1.5rem;
  margin-bottom: 4px;
  color: #333;
}

.game-content p {
  font-size: 1.5rem; /* Made same size as h2 */
  color: #666;
  margin-bottom: 5px; /* Reduced from 15px for tighter spacing */
}

/* Document container */
.document-container {
  position: relative;
  margin: 5px auto 5px; /* Further reduced from 20px auto 10px */
  perspective: 1000px;
  overflow: visible; /* Allow tilted corners to show */
  width: 100%;
  max-width: min(500px, 90vw); /* Increased from 400px to 500px */
  height: 80vh; /* Increased from 70vh to 80vh */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 15px; /* Further reduced from 30px to 15px */
}

/* Score Progress Bar */
.score-progress-bar {
  position: relative;
  width: 465px; /* Increased from 200px to 500px (2.5x wider) */
  height: 20px; /* Reduced from 32px to 20px (thinner) */
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(0, 0, 0, 0.3);
  border-radius: 4px; /* Reduced from 6px to 4px for thinner look */
  margin-bottom: 10px;
  overflow: hidden;
  box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
    inset -2px -2px 4px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.4);
  z-index: 10;
}

.progress-fill {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: linear-gradient(90deg, #8b5cf6, #a855f7, #c084fc);
  border-radius: 4px; /* Less rounded - reduced from 18px */
  transition: width 0.5s ease-out;
  z-index: 1;
}

.progress-segments {
  position: absolute;
  top: 2px;
  left: 2px;
  width: calc(100% - 4px);
  height: calc(100% - 4px);
  display: flex;
  gap: 2px; /* Create spaces between segments */
  z-index: 2;
}

.progress-segment {
  flex: 1;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  position: relative;
}

/* Clean segment divisions with spacing */

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-weight: bold;
  font-size: 1.2rem;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  z-index: 3;
}

.document-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  animation: fadeIn 0.5s ease-out forwards;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 1;
  will-change: transform;
  z-index: 1;
  transition: transform 0.1s ease-out;
  transform-style: preserve-3d;
}

.document-wrapper.slide-left {
  animation: slideOutLeft 0.8s ease-out forwards;
}

.document-wrapper.slide-right {
  animation: slideOutRight 0.8s ease-out forwards;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes fadeOut {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes textFadeOut {
  0% {
    opacity: 1;
    backdrop-filter: blur(8px);
  }
  100% {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
}

.document-image {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  display: block;
  border: 3px solid #000;
  border-radius: 8px;
  box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
    inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2);
}

.document-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  backdrop-filter: blur(8px);
  background: rgba(255, 255, 255, 0.1);
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  animation: textFadeOut 1s ease-out forwards;
  will-change: opacity, backdrop-filter;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes slideOutLeft {
  0% {
    transform: translateX(0) rotate3d(0, 1, 0, 0deg);
    opacity: 1;
  }
  100% {
    transform: translateX(-150%) rotate3d(0, 1, 0, -25deg);
    opacity: 0;
  }
}

@keyframes slideOutRight {
  0% {
    transform: translateX(0) rotate3d(0, 1, 0, 0deg);
    opacity: 1;
  }
  100% {
    transform: translateX(150%) rotate3d(0, 1, 0, 25deg);
    opacity: 0;
  }
}

/* Shake animation for wrong answers */
.document-wrapper.shake-wrong {
  animation: shakeWrong 0.5s ease-in-out;
}

@keyframes shakeWrong {
  0%,
  100% {
    transform: translateX(0);
  }
  10% {
    transform: translateX(-8px) rotate(-1deg);
  }
  20% {
    transform: translateX(8px) rotate(1deg);
  }
  30% {
    transform: translateX(-6px) rotate(-1deg);
  }
  40% {
    transform: translateX(6px) rotate(1deg);
  }
  50% {
    transform: translateX(-4px) rotate(-0.5deg);
  }
  60% {
    transform: translateX(4px) rotate(0.5deg);
  }
  70% {
    transform: translateX(-2px);
  }
  80% {
    transform: translateX(2px);
  }
  90% {
    transform: translateX(-1px);
  }
}

/* Tick mark for correct answers */
.image-card .document-wrapper.primary.show-tick::after {
  content: "✓";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 4rem;
  color: #22c55e;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
  z-index: 10;
  animation: tickAppear 0.5s ease-out;
}

/* Glow effects for correct/wrong answers - emanating from image borders */
.image-card .document-wrapper.primary.glow-green .document-image {
  box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
    inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
    0 0 30px rgba(34, 197, 94, 0.9), 0 0 60px rgba(34, 197, 94, 0.7),
    0 0 90px rgba(34, 197, 94, 0.5);
  animation: pulseGreenBorder 0.5s ease-out;
}

.image-card .document-wrapper.primary.glow-red .document-image {
  box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
    inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
    0 0 30px rgba(239, 68, 68, 0.9), 0 0 60px rgba(239, 68, 68, 0.7),
    0 0 90px rgba(239, 68, 68, 0.5);
  animation: pulseRedBorder 0.5s ease-out;
}

@keyframes tickAppear {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
  }
  50% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.2);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes pulseGreenBorder {
  0% {
    box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
      inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
      0 0 0 rgba(34, 197, 94, 0.9), 0 0 0 rgba(34, 197, 94, 0.7),
      0 0 0 rgba(34, 197, 94, 0.5);
  }
  50% {
    box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
      inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
      0 0 40px rgba(34, 197, 94, 1), 0 0 80px rgba(34, 197, 94, 0.8),
      0 0 120px rgba(34, 197, 94, 0.6);
  }
  100% {
    box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
      inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
      0 0 30px rgba(34, 197, 94, 0.9), 0 0 60px rgba(34, 197, 94, 0.7),
      0 0 90px rgba(34, 197, 94, 0.5);
  }
}

@keyframes pulseRedBorder {
  0% {
    box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
      inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
      0 0 0 rgba(239, 68, 68, 0.9), 0 0 0 rgba(239, 68, 68, 0.7),
      0 0 0 rgba(239, 68, 68, 0.5);
  }
  50% {
    box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
      inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
      0 0 40px rgba(239, 68, 68, 1), 0 0 80px rgba(239, 68, 68, 0.8),
      0 0 120px rgba(239, 68, 68, 0.6);
  }
  100% {
    box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
      inset -2px -2px 4px rgba(0, 0, 0, 0.3), 2px 2px 6px rgba(0, 0, 0, 0.2),
      0 0 30px rgba(239, 68, 68, 0.9), 0 0 60px rgba(239, 68, 68, 0.7),
      0 0 90px rgba(239, 68, 68, 0.5);
  }
}

@keyframes textFadeOut {
  0% {
    opacity: 1;
    backdrop-filter: blur(8px);
  }
  100% {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
}

/* EDIT HERE FOR DOCUMENT OVERLAY TEXT SIZES */
.document-overlay h3 {
  font-size: 2.5rem; /* INCREASED: "Real or Fake?" on document */
  margin-bottom: 5px;
}

.document-overlay h4 {
  font-size: 1.3rem; /* INCREASED: Document type (Driver's License, etc.) */
  margin-bottom: 15px;
  opacity: 0.9;
}

.game-number {
  font-size: 5rem; /* INCREASED: Document number on overlay */
  font-weight: bold;
}

/* Answer buttons */
.answer-buttons {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 5px auto; /* Reduced from 25px to 10px */
  max-width: 400px;
  gap: 20px;
}

/* EDIT HERE FOR BUTTON TEXT SIZES */
.arrow-button {
  padding: 15px 30px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
  width: 160px;
  border: none;
  border-radius: 4px;
  position: relative;
  transform-style: preserve-3d;
  transform: translateZ(0);
  text-align: center;
}

.arrow-button::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: inherit;
  border-radius: inherit;
  transform: translateZ(-8px);
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
}

.arrow-button.left {
  background: #dc3545;
  color: white;
  box-shadow: 0 8px 0 #b02a37;
}

.arrow-button.right {
  background: #28a745;
  color: white;
  box-shadow: 0 8px 0 #1e7e34;
}

.arrow-button:hover {
  transform: translateY(-2px) translateZ(0);
}

.arrow-button:active {
  transform: translateY(4px) translateZ(0);
  box-shadow: 0 4px 0 currentColor;
}

/* Confetti effect for correct answers */
.arrow-button.correct {
  position: relative;
  overflow: visible;
}

.arrow-button.correct::before {
  content: "";
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  width: 10px;
  height: 10px;
  background: #ffd700;
  border-radius: 50%;
  animation: confetti 0.6s ease-out;
}

.arrow-button.correct::after {
  content: "🎉";
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2rem;
  animation: celebrateConfetti 0.6s ease-out;
}

@keyframes confetti {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-50px) scale(0.5);
  }
}

@keyframes celebrateConfetti {
  0% {
    opacity: 0;
    transform: translateX(-50%) scale(0.5);
  }
  50% {
    opacity: 1;
    transform: translateX(-50%) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) scale(0.8);
  }
}

/* Add keyboard hint */
.keyboard-hint {
  text-align: center;
  font-size: 0.9rem;
  color: #666;
  margin-top: 20px;
  letter-spacing: 0.5px;
  display: block;
  width: 100%;
}

/* Timer info */
.timer-info {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
  color: #666;
  margin-top: 20px;
}

/* Responsive design */
@media (max-width: 768px) {
  .screen {
    margin: 20px;
    padding: 30px 15px;
  }

  .answer-buttons {
    flex-direction: column;
  }

  .timer-info {
    flex-direction: column;
    gap: 10px;
    text-align: center;
  }
}

/* Game screen container */
.game-screen {
  position: relative;
  width: 100%;
}

.game-content {
  position: relative;
  width: 100%;
}

.document-container {
  position: relative;
  width: 100%;
}

/* Keyframe animations for magnifier */
@keyframes magnifierFadeIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.3);
  }
  50% {
    opacity: 0.7;
    transform: translate(-50%, -50%) scale(0.8);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes magnifierFadeOut {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    opacity: 0.3;
    transform: translate(-50%, -50%) scale(0.7);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.3);
  }
}

@keyframes linesFadeIn {
  0% {
    opacity: 0;
  }
  30% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes linesFadeOut {
  0% {
    opacity: 1;
  }
  70% {
    opacity: 0.3;
  }
  100% {
    opacity: 0;
  }
}

/* Magnifier portal styles */
.magnifier-portal {
  position: fixed;
  width: 150px;
  height: 150px;
  border: 2px solid rgba(255, 255, 255, 0.5);
  border-radius: 4px;
  pointer-events: none;
  opacity: 0;
  background-repeat: no-repeat;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  transform: translate(-50%, -50%) scale(0.3);
  animation: magnifierFadeOut 0.4s ease-out forwards;
}

.magnifier-portal.visible {
  animation: magnifierFadeIn 0.4s ease-out forwards;
}

/* Crosshair lines container */
.crosshair-lines {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 998; /* Behind magnifier */
  opacity: 0;
  animation: linesFadeOut 0.4s ease-out forwards;
}

.crosshair-lines.visible {
  animation: linesFadeIn 0.4s ease-out forwards;
}

/* Individual line styles */
.line-vertical-top,
.line-vertical-bottom,
.line-horizontal-left,
.line-horizontal-right {
  position: absolute;
  background: #000000;
  pointer-events: none;
}

/* Top vertical line */
.line-vertical-top {
  width: 2px;
  left: var(--cursor-x);
  transform: translateX(-50%);
  top: -5000px;
  height: calc(var(--cursor-y) + 5000px);
}

/* Bottom vertical line */
.line-vertical-bottom {
  width: 2px;
  left: var(--cursor-x);
  transform: translateX(-50%);
  top: var(--cursor-y);
  height: 5000px;
}

/* Left horizontal line */
.line-horizontal-left {
  height: 2px;
  top: var(--cursor-y);
  transform: translateY(-50%);
  left: -5000px;
  width: calc(var(--cursor-x) + 5000px);
}

/* Right horizontal line */
.line-horizontal-right {
  height: 2px;
  top: var(--cursor-y);
  transform: translateY(-50%);
  left: var(--cursor-x);
  width: 5000px;
}

.document-wrapper {
  cursor: crosshair;
  position: relative;
  max-width: 100%;
}

/* Hide cursor when magnifier is active */
.document-wrapper.magnifier-active {
  cursor: none;
}

/* Ensure the document image stays contained */
.document-image {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Prevent any overflow and scrollbars */
html,
body {
  overflow: hidden; /* Hide both horizontal and vertical scrollbars */
  margin: 0;
  padding: 0;
  height: 100vh;
  width: 100vw;
}

/* Solid white base (initial single background) */
.base-white {
  position: fixed;
  inset: 0;
  z-index: 0;
  background: #ffffff;
  pointer-events: none;
}

.App {
  height: 100vh;
  width: 100vw;
  overflow: hidden;
}

.screen {
  height: 100vh;
  width: 100vw;
  overflow: hidden;
}

/* Game layout with sidebar */
.game-layout {
  display: flex;
  width: 100vw;
  height: 100vh;
  max-width: none;
  margin: 0;
  padding: 0;
}

/* Feedback sidebar on the left */
.feedback-sidebar {
  width: 0;
  min-width: 0;
  background: white;
  border-right: 2px solid #e5e7eb;
  overflow-x: hidden;
  overflow-y: auto;
  transition: all 0.4s ease-in-out;
  z-index: 1001;
  height: 100vh;
}

.feedback-sidebar.visible {
  width: 350px;
  min-width: 350px;
}

.sidebar-content {
  padding: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
  font-family: var(--app-font);
}

.feedback-header {
  padding: 15px 20px;
  color: white;
  text-align: center;
  flex-shrink: 0;
}

.feedback-header.correct {
  background: linear-gradient(135deg, #10b981, #059669);
}

.feedback-header.incorrect {
  background: linear-gradient(135deg, #ef4444, #dc2626);
}

.feedback-header h3 {
  margin: 0;
  font-size: 1.2rem;
  font-weight: bold;
}

/* Simplify and unify sizes */
.feedback-body {
  font-size: 15px;
  line-height: 1.5;
  color: #111827;
}
.feedback-body h4 {
  font-size: 18px;
  margin: 0 0 6px 0;
  color: #0f172a;
}
.feedback-body .document-description {
  font-size: 14px;
  color: #6b7280;
}
.feedback-body .hint-text {
  margin-top: 8px;
  color: #4b5563;
  font-size: 14px;
}

.document-info {
  margin-bottom: 15px;
  text-align: center;
}

.document-info h4 {
  margin: 0 0 6px 0;
  color: #1f2937;
  font-size: 1rem;
  font-weight: 600;
}

.document-description {
  color: #6b7280;
  margin: 6px 0;
  font-size: 0.85rem;
  line-height: 1.3;
}

.correct-answer {
  font-size: 0.9rem;
  margin: 10px 0;
  padding: 8px;
  border-radius: 6px;
  background: #f3f4f6;
  font-weight: 500;
}

.correct-answer strong {
  color: #1f2937;
  font-weight: 700;
}

.educational-section {
  background: linear-gradient(135deg, #8b5cf6, #a855f7, #c084fc);
  border: 1px solid #7c3aed;
  border-radius: 12px;
  padding: 16px;
  margin: 15px 0;
  color: white;
  font-family: var(--app-font);
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.educational-section h5 {
  margin: 0 0 12px 0;
  color: white;
  font-size: 1rem;
  font-weight: 600;
  font-family: inherit;
}

.wrong-explanation {
  background: linear-gradient(135deg, #8b5cf6, #a855f7, #c084fc);
  border: 1px solid #7c3aed;
  border-radius: 12px;
  padding: 16px;
  color: #000000;
  font-weight: 500;
  margin-bottom: 12px;
  line-height: 1.4;
  font-size: 0.9rem;
  font-family: inherit;
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.key-indicators,
.forgery-details,
.security-features {
  margin: 12px 0;
  padding: 12px;
  background: white;
  border-left: 3px solid #8b5cf6;
}

.key-indicators h6,
.forgery-details h6,
.security-features h6 {
  margin: 0 0 8px 0;
  color: #374151;
  font-size: 0.9rem;
  font-weight: 600;
  font-family: inherit;
}

.key-indicators p {
  margin: 0;
  color: #6b7280;
  font-size: 0.85rem;
  line-height: 1.3;
  font-family: inherit;
}

.forgery-details ul,
.security-features ul {
  margin: 8px 0 0 0;
  padding-left: 16px;
}

.forgery-details li,
.security-features li {
  margin: 4px 0;
  color: #6b7280;
  line-height: 1.3;
  font-size: 0.85rem;
  font-family: inherit;
}

.positive-reinforcement {
  background: #d1fae5;
  border: 1px solid #10b981;
  border-radius: 8px;
  padding: 15px;
  margin: 15px 0;
  text-align: center;
}

.positive-reinforcement h5 {
  margin: 0 0 8px 0;
  color: #065f46;
  font-size: 1rem;
  font-weight: 600;
}

.positive-reinforcement p {
  color: #065f46;
  margin: 0;
  line-height: 1.4;
  font-size: 0.85rem;
}

/* Game content takes remaining space */
.game-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 30px;
  text-align: center;
  min-width: 0;
  height: 100vh;
  overflow: hidden;
}

.game-content h2 {
  font-size: 2.2rem;
  margin: 0 0 12px 0;
}

.game-content p {
  font-size: 1.2rem;
  margin: 0 0 30px 0;
}

/* Document container responsive sizing */
.document-container {
  position: relative;
  margin: 0 auto;
  perspective: 1000px;
  overflow: visible;
  width: 100%;
  max-width: min(880px, 100vw); /* +5% again */
  height: auto;
  max-height: 70vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

/* Score Progress Bar - larger again */
.score-progress-bar {
  position: relative;
  width: min(500px, 90vw);
  height: 20px;
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(0, 0, 0, 0.3);
  border-radius: 4px;
  margin-bottom: 20px;
  overflow: hidden;
  box-shadow: inset 2px 2px 4px rgba(255, 255, 255, 0.3),
    inset -2px -2px 4px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.4);
  z-index: 10;
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-weight: bold;
  font-size: 1.1rem;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  z-index: 3;
}

/* Document wrapper responsive */
.document-wrapper {
  position: relative;
  width: 100%;
  max-width: min(767px, 89.25vw); /* +5% again */
  height: auto;
  max-height: 60vh;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
}
/* Subtle grid overlay, only shown on correct answers */
.document-wrapper .grid-overlay {
  position: absolute;
  inset: 0;
  border-radius: 12px;
  pointer-events: none;
  opacity: 0;
  background-image: linear-gradient(
      rgba(255, 255, 255, 0.06) 1px,
      transparent 1px
    ),
    linear-gradient(90deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px);
  background-size: 16px 16px, 16px 16px;
  mix-blend-mode: overlay;
  transition: opacity 220ms ease;
  z-index: 2;
}
.document-wrapper.show-tick .grid-overlay,
.document-wrapper.glow-green .grid-overlay {
  opacity: 1;
}

.document-image {
  max-width: 100%;
  max-height: 60vh;
  height: auto;
  width: auto;
  object-fit: contain;
  display: block;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

/* Loading placeholder responsive */
.loading-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  height: min(400px, 50vh);
  width: 100%;
  background: #f3f4f6;
  border: 2px dashed #d1d5db;
  border-radius: 8px;
  color: #6b7280;
  font-style: italic;
}

.loading-placeholder p {
  margin: 0;
  font-size: 1.2rem;
}

/* Educational section */
.educational-section {
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  padding: 15px;
  margin: 15px 0;
}

.educational-section h5 {
  margin: 0 0 10px 0;
  color: #374151;
  font-size: 1rem;
  font-weight: 600;
}

.wrong-explanation {
  color: rgba(255, 255, 255, 0.95);
  font-weight: 500;
  margin-bottom: 12px;
  line-height: 1.4;
  font-size: 0.9rem;
}

.key-indicators,
.forgery-details,
.security-features {
  margin: 12px 0;
  padding: 12px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 6px;
  border-left: 3px solid rgba(255, 255, 255, 0.3);
}

.key-indicators h6,
.forgery-details h6,
.security-features h6 {
  margin: 0 0 8px 0;
  color: white;
  font-size: 0.9rem;
  font-weight: 600;
}

.key-indicators p {
  margin: 0;
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.85rem;
  line-height: 1.3;
}

.forgery-details ul,
.security-features ul {
  margin: 8px 0 0 0;
  padding-left: 16px;
}

.forgery-details li,
.security-features li {
  margin: 4px 0;
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.3;
  font-size: 0.85rem;
}

/* Answer buttons container */
.answer-buttons {
  display: flex;
  gap: 30px;
  margin: 30px 0 15px 0;
  justify-content: center;
  align-items: center;
}

/* Keyboard hint */
.keyboard-hint {
  font-size: 1rem;
  color: #6b7280;
  margin: 0;
}

/* Disabled button states */
.arrow-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: #9ca3af;
  color: #d1d5db;
}

.arrow-button:disabled:hover {
  background: #9ca3af;
  transform: none;
  box-shadow: none;
}

/* Responsive adjustments for smaller screens */
@media (max-height: 700px) {
  .game-content {
    padding: 20px;
  }

  .game-content h2 {
    font-size: 1.8rem;
    margin: 0 0 8px 0;
  }

  .game-content p {
    font-size: 1rem;
    margin: 0 0 20px 0;
  }

  .document-container {
    max-height: 60vh;
    padding: 15px;
    max-width: min(500px, 65vw);
  }

  .document-image {
    max-height: 50vh;
  }

  .loading-placeholder {
    height: min(300px, 40vh);
  }

  .answer-buttons {
    gap: 25px;
    margin: 25px 0 12px 0;
  }
}

@media (max-height: 600px) {
  .game-content {
    padding: 15px;
  }

  .game-content h2 {
    font-size: 1.5rem;
    margin: 0 0 6px 0;
  }

  .game-content p {
    font-size: 0.9rem;
    margin: 0 0 15px 0;
  }

  .document-container {
    max-height: 50vh;
    padding: 10px;
    max-width: min(400px, 60vw);
  }

  .document-image {
    max-height: 40vh;
  }

  .score-progress-bar {
    height: 16px;
    margin-bottom: 15px;
    width: min(400px, 85vw);
  }

  .score-text {
    font-size: 0.9rem;
  }

  .answer-buttons {
    gap: 20px;
    margin: 20px 0 10px 0;
  }
}

/* Adjust screen for new layout */
.screen.game-screen {
  max-width: none;
  width: 100vw;
  height: 100vh;
  padding: 0;
  margin: 0;
}

/* Stronger background glows */
.screen.game-screen {
  position: relative;
  background: radial-gradient(
      1000px 680px at 12% 88%,
      rgba(139, 92, 246, 0.24),
      transparent 60%
    ),
    radial-gradient(
      780px 560px at 84% 22%,
      rgba(168, 85, 247, 0.22),
      transparent 60%
    ),
    linear-gradient(180deg, #f6f3ff 0%, #ffffff 100%);
}
.screen.game-screen #aurora-overlay.aurora,
.screen.game-screen .aurora {
  display: none;
}

.aurora-global {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: 50vh;
  pointer-events: none;
  z-index: 0; /* under content, above html bg */
  overflow: hidden;
  transform: translateY(100%);
  opacity: 0;
  transition: transform 260ms cubic-bezier(0.2, 0.8, 0.2, 1.1),
    opacity 240ms ease-out;
}
.aurora-global.active {
  transform: translateY(0);
  opacity: 1;
}

/* During countdown: hide section overlay and aurora; keep clean white */
/* Hide overlays during pure countdown only; allow during transition */
body:has(.countdown-screen:not(.transitioning)) #section-game::before {
  content: none !important;
}
body:has(.countdown-screen:not(.transitioning)) .aurora-global {
  display: none !important;
}
.aurora__item {
  position: absolute;
  width: 60vw;
  height: 60vw;
  background: radial-gradient(
    circle,
    rgba(139, 92, 246, 0.22) 0%,
    transparent 70%
  );
  border-radius: 50%;
  filter: blur(48px);
  opacity: 0.7;
  animation: moveAurora 12s infinite alternate ease-in-out;
}
.aurora__item:nth-child(1) {
  bottom: -10%;
  left: 10%;
  animation-delay: 0s;
}
.aurora__item:nth-child(2) {
  bottom: 10%;
  left: 35%;
  animation-delay: 1.2s;
}
.aurora__item:nth-child(3) {
  bottom: 0%;
  left: 62%;
  animation-delay: 2.4s;
}
.aurora__item:nth-child(4) {
  bottom: 18%;
  left: 20%;
  animation-delay: 3.6s;
}
.aurora__item:nth-child(5) {
  bottom: 6%;
  left: 78%;
  animation-delay: 4.8s;
}
@keyframes moveAurora {
  0% {
    transform: translateY(0) translateX(0);
  }
  100% {
    transform: translateY(-24px) translateX(22px);
  }
}
.screen.game-screen::before {
  left: 24px;
  bottom: 28px;
  width: clamp(320px, 48vw, 720px);
  height: 34px;
  background: rgba(139, 92, 246, 0.3);
  border-radius: 999px;
  filter: blur(26px);
}
.screen.game-screen::after {
  right: 32px;
  top: 34%;
  width: clamp(300px, 44vw, 560px);
  height: 30px;
  background: rgba(168, 85, 247, 0.22);
  border-radius: 999px;
  filter: blur(22px);
}

/* Simplify feedback header colors (only slight purple/green) */
.feedback-header.correct {
  background: linear-gradient(135deg, #10b981, #10b981);
  color: #fff;
}
.feedback-header.incorrect {
  background: linear-gradient(135deg, #ef4444, #ef4444);
  color: #fff;
}

/* Tone down inner cards to neutral with purple accents already defined */
.key-indicators,
.forgery-details,
.security-features {
  border-left-color: #8b5cf6;
}

/* Two-column grid similar to mock - larger and vertically centered */
.game-grid {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: 1.25fr 1fr; /* restore original ratios */
  gap: 56px; /* restore original gap */
  align-items: start !important;
  align-content: start;
  width: min(1400px, 96vw);
  min-height: calc(100vh - 80px);
  margin: 24px auto 32px;
  padding: 8px 0 24px;
  row-gap: 18px;
}

/***** Left: play panel *****/
/* The previous play-panel container is no longer used as a wrapper; timer sits in row 1, image in row 2 */
.play-panel {
  /* keep for compatibility if referenced */
  display: contents;
}

/* Thin progress pill at top */
.time-remaining {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-self: start; /* ensure it anchors to the top of its grid cell */
}
.time-label {
  font-size: 12px;
  color: #6b7280;
  text-align: left;
}
/* Timer smoothing */
.time-bar {
  height: 10px;
  background: transparent; /* no background behind bars */
  border-radius: 999px;
  overflow: hidden;
  position: relative;
  --bar-transition: 0.35s; /* default transition */
}
.time-fill {
  height: 100%;
  background: linear-gradient(90deg, #8b5cf6, #a855f7);
  transition: width var(--bar-transition, 0.35s) linear;
  position: absolute;
  left: 0;
  top: 0;
}
.time-fill.play {
  z-index: 4; /* purple in front */
}
.time-fill.feedback {
  background: #d5d9ea; /* slightly lighter gray */
  z-index: 3; /* behind purple */
  left: 0;
  right: auto;
  transform-origin: left center; /* shrink right edge → left */
  transition: width var(--bar-transition, 0.35s) linear, opacity 120ms ease;
  opacity: 1; /* always visible as background bar */
}
.showing-feedback .time-remaining .time-bar {
  --bar-transition: 0.1s;
}
.time-bar.bar-resetting {
  --bar-transition: 0.35s;
}
.showing-feedback .time-remaining .time-fill.feedback {
  opacity: 1;
}

/* Card around the image with purple-tinted shadow */
.image-card {
  position: relative;
  background: transparent !important;
  padding: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* Small toast area (optional) */
.feedback-toast {
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  background: #fff;
  color: #111827;
  padding: 10px 14px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 13px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  z-index: 2;
}
.toast-correct {
  border: 1px solid #10b98122;
}
.toast-wrong {
  border: 1px solid #ef444422;
}

/* Reuse existing document wrapper but constrain to card */
.image-card .document-wrapper {
  margin: 0;
}

/* Make the image larger within the card */
.image-card .document-image {
  width: 100%;
  height: auto;
  max-height: clamp(480px, 68vh, 820px);
  border-radius: 12px;
  object-fit: cover;
}

/* Ensure top edges of cards align visually with grid row start */
.document-container,
.image-card {
  align-self: start;
}

/* Circular action buttons like mock */
.action-row {
  display: flex;
  gap: 28px;
  justify-content: center;
  align-items: center;
  margin-top: 0;
  position: absolute;
  left: 50%;
  bottom: 16px;
  transform: translateX(-50%);
  z-index: 2;
}
.arrow-button.circle {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  width: 80px; /* match demo h-20 w-20 */
  height: 80px; /* match demo h-20 w-20 */
  border-radius: 999px;
  border: none;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
  transition: transform 0.12s ease, box-shadow 0.12s ease;
  font-weight: 700; /* stronger for visibility */
  backdrop-filter: saturate(120%);
}
.arrow-button.circle .symbol {
  font-size: 24px; /* slightly larger like demo */
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.arrow-button.circle .label {
  font-size: 14px; /* demo text-sm */
  text-transform: lowercase;
  display: block;
  font-weight: 500; /* demo font-medium */
  color: inherit;
}
.arrow-button.circle:hover {
  transform: scale(1.05);
  box-shadow: 0 16px 36px rgba(0, 0, 0, 0.2);
}
.arrow-button.circle.danger {
  background: #ef4444; /* red-500 */
  color: #fff;
  border-radius: 9999px; /* tailwind rounded-full */
  border: 1px solid rgba(239, 68, 68, 0.15);
  box-shadow: 0 10px 24px rgba(239, 68, 68, 0.22);
}
.arrow-button.circle.success {
  background: #10b981; /* match learning card green */
  color: #fff;
  border-radius: 9999px;
  border: 1px solid rgba(16, 185, 129, 0.15);
  box-shadow: 0 10px 24px rgba(16, 185, 129, 0.22);
}

/* Ensure visibility when disabled (override generic .arrow-button:disabled) */
.action-row .arrow-button.circle:disabled {
  opacity: 1;
  color: #fff;
  cursor: not-allowed;
}
.action-row .arrow-button.circle.danger:disabled {
  background: #f87171; /* lighter red for disabled */
}
.action-row .arrow-button.circle.success:disabled {
  background: #34d399; /* lighter green for disabled */
}
.action-row .arrow-button.circle .symbol,
.action-row .arrow-button.circle .label {
  color: inherit;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25); /* improve contrast */
}

/***** Right: copy + learning card *****/
.copy-panel {
  display: contents; /* hero + learning card occupy separate rows */
}

/* Row/column placement to decouple dependencies */
.time-remaining {
  grid-column: 1;
  grid-row: 1;
}
.copy-hero {
  grid-column: 2;
  grid-row: 1;
}
.document-container {
  grid-column: 1;
  grid-row: 2;
}
#learning-card {
  grid-column: 2;
  grid-row: 2;
  align-self: start;
}

/* Right panel wrapper to host learning card + vertical pill */
#copy-right-panel {
  grid-column: 2;
  grid-row: 2;
  align-self: start;
  display: flex; /* align pill next to learning card */
  flex-direction: row;
  gap: 16px;
  align-items: flex-start; /* align on Y-axis (tops line up) */
}

/* Learning column stacks card + footnote */
#learning-column {
  display: flex;
  flex-direction: column;
  gap: 6vh; /* doubled again, relative to viewport height */
  min-width: 0;
}
.learning-footnote-text {
  color: #8b5cf6;
  font-family: var(--app-font);
  font-size: clamp(17px, 1.9vh, 20px);
  text-align: left;
}

/* Make sure hero block aligns with timer top */
#copy-hero,
.copy-hero {
  align-self: start;
  max-width: 100%;
  width: 100%;
  text-align: left;
}
.hero-title {
  font-size: clamp(34px, 5.9vw, 62px); /* slightly wider appearance */
  line-height: 1.08; /* tight leading */
  margin: 0 0 6px 0;
  color: #000; /* black like example */
  font-weight: 800;
  font-family: var(--app-font);
  text-align: left;
}
.hero-title .hero-second-line {
  display: inline-block;
  white-space: nowrap; /* keep second line on a single line on wide screens */
  contain: layout inline-size; /* isolate layout changes from rest */
}
@media (max-width: 1024px) {
  .hero-title .hero-second-line {
    white-space: normal; /* allow wrap on small screens */
  }
}
.hero-title .fake-word {
  color: #ef4444; /* red for 'fake' */
}
.hero-sub {
  color: #6b7280;
  margin: 0 0 22px 0;
  font-size: clamp(17px, 1.9vh, 20px);
  font-family: var(--app-font);
  text-align: left;
}
/* Red underline accent for "correct guess" */
.hero-sub .em {
  color: #0f172a;
  text-decoration: underline;
  text-underline-offset: 4px;
  text-decoration-thickness: 3px;
  text-decoration-color: #ef4444; /* red underline */
}

/* Learning card area with soft purple surface */
.learning-card {
  width: 100%;
  min-height: clamp(180px, 28vh, 340px);
  background: linear-gradient(135deg, #f7f7ff, #efeefe);
  padding: 22px;
  border-radius: 22px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6),
    0 18px 30px rgba(24, 18, 53, 0.08);
}
.learning-placeholder {
  width: 100%;
  height: 100%;
  border-radius: 18px;
}
.learning-content {
  height: 100%;
  overflow: auto;
}

/* Keep the purple pill only for the wrong explanation text */
.educational-section {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
}
.educational-section h5 {
  margin: 0 0 10px 0;
  color: #0f172a;
  font-weight: 700;
}
.wrong-explanation {
  background: linear-gradient(135deg, #8b5cf6, #a855f7, #c084fc);
  border: 1px solid #7c3aed;
  border-radius: 12px;
  padding: 14px 16px;
  color: #000;
  font-weight: 600;
  margin: 10px 0 14px 0;
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.25);
}
.key-indicators,
.forgery-details,
.security-features {
  background: #fff;
  border-left: 3px solid #8b5cf6;
  border-radius: 8px;
  padding: 12px 14px;
  margin: 10px 0;
}
.key-indicators h6,
.forgery-details h6,
.security-features h6 {
  margin: 0 0 8px 0;
  color: #111827;
}
.key-indicators p,
.forgery-details li,
.security-features li {
  color: #6b7280;
}

/* Hide the old center score bar since we moved time to top */
.score-progress-bar {
  display: none;
}

/* Hide timer quickly when feedback appears */
.play-panel .time-remaining {
  opacity: 1;
  transition: opacity 180ms ease;
}
/* Keep time bar visible during feedback; no fade-out */

/* Keyboard hint shows both arrows */
.keyboard-hint::after {
  content: "";
}

/* Responsive: stack on narrow heights */
@media (max-width: 1080px) {
  .game-grid {
    grid-template-columns: 1fr;
    gap: 20px;
    height: auto;
  }
  .copy-panel {
    padding-top: 0;
  }
}

/* Dramatic swipe animations */
@keyframes slideOutLeft {
  0% {
    transform: translateX(0) rotate3d(0, 1, 0, 0deg) scale(1);
    opacity: 1;
    filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.12));
  }
  60% {
    transform: translateX(-40%) rotate3d(0, 1, 0, -12deg) scale(0.98);
  }
  100% {
    transform: translateX(-160%) rotate3d(0, 1, 0, -28deg) scale(0.95);
    opacity: 0;
    filter: none;
  }
}
@keyframes slideOutRight {
  0% {
    transform: translateX(0) rotate3d(0, 1, 0, 0deg) scale(1);
    opacity: 1;
    filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.12));
  }
  60% {
    transform: translateX(40%) rotate3d(0, 1, 0, 12deg) scale(0.98);
  }
  100% {
    transform: translateX(160%) rotate3d(0, 1, 0, 28deg) scale(0.95);
    opacity: 0;
    filter: none;
  }
}

/* Jump animation for correct */
@keyframes jumpOnce {
  0% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(0);
  }
}
.image-card .document-wrapper.primary.jump-correct {
  animation: jumpOnce 380ms ease-out;
}

/* Ensure circular timer is above learning content */
.learning-card {
  position: relative;
}
.feedback-timer {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 5;
}
.learning-card .learning-content {
  position: relative;
  z-index: 1;
}

/* Coherent image card sizing */
.image-card {
  width: 100%;
  max-width: min(1058px, 94.1vw); /* +5% again */
}
.document-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
}
.document-image {
  width: 100%;
  height: auto;
  max-height: 68vh;
  min-height: 420px; /* minimum display size for small documents */
  object-fit: contain;
  border: 3px solid #000;
  border-radius: 8px;
}

/* Learning card: left-justified and coherent two-size typography */
.learning-card,
.learning-card * {
  text-align: left;
  font-family: inherit;
}
:root {
  --lc-heading: 17px;
  --lc-body: 15px;
}
.learning-card .learning-content {
  font-size: var(--lc-body);
  line-height: 1.6;
}
.feedback-header h3,
.feedback-body h4,
.edu-simple h5 {
  font-size: var(--lc-heading);
  font-weight: 700;
  margin: 0 0 8px 0;
}
.document-description,
.correct-answer.inline,
.edu-main,
.edu-indicators {
  font-size: var(--lc-body);
}

/* Grey circular countdown: larger and clearly visible on the learning card */
.learning-card {
  position: relative;
}
.feedback-timer {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 40px;
  height: 40px;
  z-index: 8;
}
.circular-timer {
  --angle: 1turn;
  border-radius: 999px;
  background: conic-gradient(#6b7280 var(--angle, 0turn), #e5e7eb 0);
  display: grid;
  place-items: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
  border: 1px solid #d1d5db;
}
.circular-timer .dot {
  width: 28px;
  height: 28px;
  background: #fff;
  border-radius: 999px;
  border: 1px solid #e5e7eb;
}

/* Feedback body unified font sizing */
.feedback-body {
  font-size: 16px;
  line-height: 1.6;
}
.feedback-body * {
  font-size: inherit;
  line-height: inherit;
}
.feedback-body h4 {
  font-weight: 700;
}

/* Ensure document-info matches unified feedback-body typography */
.feedback-body .document-info {
  font-size: inherit;
  line-height: inherit;
  text-align: left;
}
.feedback-body .document-info h4,
.feedback-body .document-info p {
  font-size: inherit;
  line-height: inherit;
  margin: 0 0 10px 0;
}
.feedback-body .correct-answer {
  font-size: inherit;
  line-height: inherit;
}

/* Final coercion: make document-info match feedback-body exactly */
.feedback-body {
  font-size: 16px !important;
  line-height: 1.6 !important;
  text-align: left;
}
.feedback-body .document-info,
.feedback-body .document-info * {
  font-size: inherit !important;
  line-height: inherit !important;
  text-align: left !important;
}
.feedback-body .document-info h4 {
  font-weight: 700;
  margin: 0 0 10px 0;
}
.feedback-body .document-info p {
  margin: 0 0 10px 0;
}

/* Enforce inheritance for all content inside document-info within feedback-body */
.feedback-body .document-info,
.feedback-body .document-info * {
  font-size: inherit !important;
  line-height: inherit !important;
  text-align: left !important;
}
.feedback-body .document-description,
.feedback-body .correct-answer,
.feedback-body .correct-answer.inline,
.feedback-body .hint-text {
  font-size: inherit !important;
  line-height: inherit !important;
  text-align: inherit !important;
}

/* Unify all typography inside learning-content */
.learning-card .learning-content {
  font-family: var(--app-font) !important;
  font-size: 16px !important;
  line-height: 1.6 !important;
}
.learning-card .learning-content * {
  font-family: inherit !important;
  font-size: inherit !important;
  line-height: inherit !important;
}

/* Unified, larger learning content and taller card */
.copy-panel .learning-card {
  background: #ffffff !important;
  border: 1px solid #e5e7eb !important;
  border-radius: 16px !important;
  min-height: clamp(340px, 54vh, 640px) !important;
  max-height: clamp(
    280px,
    44vh,
    520px
  ) !important; /* stays below image (68vh) */
  padding: 20px 20px 24px 20px !important;
}
.copy-panel .learning-card .learning-content {
  font-family: var(--app-font) !important;
  font-size: clamp(17px, 1.9vh, 20px) !important; /* match hero-sub scale */
  line-height: 1.65 !important;
  color: #111827 !important;
}
.copy-panel .learning-card .learning-content * {
  font-family: inherit !important;
  font-size: inherit !important;
  line-height: inherit !important;
  color: inherit !important;
  text-align: left !important;
}
.copy-panel .learning-card .learning-content p {
  margin: 8px 0 12px 0 !important;
}
.copy-panel .learning-card .feedback-header h3,
.copy-panel .learning-card .feedback-body h4,
.copy-panel .learning-card .edu-simple h5 {
  font-size: 17px !important;
  font-weight: 700 !important;
  margin: 0 0 8px 0 !important;
}
.copy-panel .learning-card .feedback-body {
  font-size: inherit !important;
  line-height: inherit !important;
}
.copy-panel .learning-card .document-info,
.copy-panel .learning-card .document-info * {
  font-size: inherit !important;
  line-height: inherit !important;
}

/* Stronger purple background for both screens */
.countdown-screen,
.screen.game-screen {
  background: radial-gradient(
      1100px 720px at 12% 88%,
      rgba(139, 92, 246, 0.28),
      transparent 62%
    ),
    radial-gradient(
      900px 600px at 84% 22%,
      rgba(168, 85, 247, 0.24),
      transparent 62%
    ),
    linear-gradient(180deg, #f4f1ff 0%, #ffffff 100%) !important;
}

/* Learning card should not exceed image card height; allow internal scroll if needed */
.copy-panel .learning-card {
  min-height: clamp(260px, 40vh, 500px) !important;
  max-height: clamp(
    300px,
    48vh,
    540px
  ) !important; /* stays below image (68vh) */
  overflow: auto !important;
  align-self: start !important;
  margin-bottom: 0 !important;
}

/* Learning card pop-in animation when becoming visible */
.learning-card {
  opacity: 0;
  transform: translateY(10px) scale(0.96);
  transition: none;
  will-change: transform, opacity;
}
@keyframes cardPopIn {
  0% {
    opacity: 0;
    transform: translateY(10px) scale(0.96);
  }
  60% {
    opacity: 1;
    transform: translateY(-3px) scale(1.04);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
.learning-card.visible {
  opacity: 1;
  animation: cardPopIn 340ms cubic-bezier(0.2, 0.8, 0.2, 1.1);
}

@keyframes cardPopOut {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  35% {
    opacity: 1;
    transform: translateY(-3px) scale(1.03);
  } /* overshoot up */
  100% {
    opacity: 0;
    transform: translateY(10px) scale(0.96);
  }
}
.learning-card.pop-out {
  animation: cardPopOut 300ms cubic-bezier(0.2, 0.8, 0.2, 1);
  pointer-events: none;
}

/* During swipe, fade the current doc to avoid ghosting */
.document-wrapper.slide-left .document-image,
.document-wrapper.slide-right .document-image {
  opacity: 0;
  transition: opacity 0.4s ease;
}

/* Pop-in animation for the new document */
@keyframes docPopIn {
  0% {
    opacity: 0;
    transform: scale(0.96) translateY(8px);
  }
  60% {
    opacity: 1;
    transform: scale(1.02) translateY(-2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}
.document-wrapper.pop-in .document-image {
  animation: docPopIn 320ms ease-out;
}

/* Hide the outgoing document to prevent frame flash */
.document-wrapper.outgoing .document-image {
  opacity: 0 !important;
}

/* Ensure default visible */
.document-wrapper .document-image {
  opacity: 1;
  transition: opacity 0.3s ease;
}
/* Strong fade during swipe for entire duration */
.document-wrapper.slide-left .document-image,
.document-wrapper.slide-right .document-image {
  opacity: 0 !important;
}
/* Swipe animations snappy and always fading during slide */
.document-wrapper.slide-left {
  animation: slideOutLeft 0.75s ease-in-out forwards;
}
.document-wrapper.slide-right {
  animation: slideOutRight 0.75s ease-in-out forwards;
}
.document-wrapper.slide-left .document-image,
.document-wrapper.slide-right .document-image {
  opacity: 0 !important;
  transition: opacity 0.35s ease;
}

/* Bigger button text */
.arrow-button.circle .label {
  font-size: 15px;
}
.arrow-button.circle .symbol {
  font-size: 24px;
}

/* Keep wrapper hidden while marked outgoing; only show after pop-in starts */
.document-wrapper.outgoing {
  visibility: hidden;
}
.document-wrapper.pop-in {
  visibility: visible;
}

/* Top-right Book a demo CTA mirrors logo */
.header-cta {
  position: fixed;
  top: 16px; /* more space from top */
  right: 28px; /* more space from right */
  z-index: 1200;
}
.header-cta {
  display: flex;
  gap: 10px;
  align-items: center;
}
.login-btn {
  background: transparent;
  border: none;
  color: #8b5cf6; /* app purple */
  font-family: var(--app-font);
  font-weight: 700;
  font-size: 16px;
  letter-spacing: 0.2px;
  cursor: pointer;
  padding: 10px 12px;
}
.login-btn:hover {
  text-decoration: underline;
}
.book-demo-btn {
  height: 50px; /* match .veridox-logo img height */
  padding: 0 18px;
  border-radius: 12px;
  border: 2px solid #8268ff;
  background: #ffffffcc;
  color: #2b2456;
  font-weight: 700;
  font-size: 16px; /* mirror logo text size visually */
  letter-spacing: 0.2px;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(130, 104, 255, 0.18);
  backdrop-filter: blur(4px);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
}
.book-demo-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 28px rgba(130, 104, 255, 0.24);
}
.book-demo-btn:active {
  transform: translateY(0);
}

/* Shimmer sparkle for Book a demo */
.book-demo-btn {
  position: relative;
  overflow: hidden;
}
.book-demo-btn::after {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: linear-gradient(
    120deg,
    transparent 0%,
    rgba(255, 255, 255, 0.65) 45%,
    transparent 60%
  );
  transform: translateX(-120%);
  animation: shimmer 2.4s ease-in-out infinite;
  pointer-events: none;
}
@keyframes shimmer {
  0% {
    transform: translateX(-120%);
  }
  60% {
    transform: translateX(120%);
  }
  100% {
    transform: translateX(120%);
  }
}

/* Triple soft purple shadow behind image card */
.document-container {
  position: relative;
}
.image-card {
  position: relative;
  z-index: 1;
  transform: translateY(var(--image-card-y-nudge, -6vh)); /* Y nudge */
  overflow: visible; /* ensure bottom glows are never clipped */
}
.image-card::before,
.image-card::after {
  content: "";
  position: absolute;
  left: 24px;
  right: 24px;
  bottom: -12px;
  height: 24px;
  border-radius: 999px;
  z-index: 0;
}
/* First (closest) layer */
.image-card::before {
  background: rgba(130, 104, 255, 0.28);
  filter: blur(18px);
  transform: translateY(4px);
}
/* Second layer, slightly wider/softer */
.image-card::after {
  background: rgba(130, 104, 255, 0.18);
  filter: blur(26px);
  left: 36px;
  right: 36px;
  bottom: -20px;
  height: 22px;
}
/* Third layer lives on the container for deeper spread */
.document-container::after {
  content: "";
  position: absolute;
  left: 48px;
  right: 48px;
  bottom: -30px;
  height: 20px;
  border-radius: 999px;
  background: rgba(130, 104, 255, 0.12);
  filter: blur(30px);
  z-index: 0;
}

/* Inline pill-style feedback header */
.feedback-header {
  display: inline-block;
  padding: 8px 12px;
  border-radius: 12px;
  margin: 0 0 10px 0;
}

/* Soft bordered container for feedback body */
.copy-panel .learning-card .feedback-body {
  border: 1px solid rgba(130, 104, 255, 0.25);
  border-radius: 14px;
  padding: 14px 16px;
  background: rgba(247, 247, 255, 0.45);
  box-shadow: 0 6px 16px rgba(130, 104, 255, 0.08);
}

/* Feedback header tangential to feedback body */
.copy-panel .learning-card .feedback-header {
  margin-bottom: 0;
  vertical-align: bottom;
}
.copy-panel .learning-card .feedback-body {
  margin-top: -3px; /* pull border slightly under header */
  padding-top: 17px; /* compensate for negative margin */
  border-top-left-radius: 0; /* remove bevel on top-left corner */
}

/* Circular timer alignment + purple gradient */
.feedback-timer {
  top: 12px;
  right: 12px;
  width: 44px;
  height: 44px;
}
.circular-timer {
  --angle: 1turn;
  box-sizing: border-box;
  border-radius: 999px;
  display: grid;
  place-items: center;
  background: conic-gradient(#8b5cf6 var(--angle), #e4e1ff 0);
  /* ring thickness via mask */
  -webkit-mask: radial-gradient(
    farthest-side,
    transparent calc(100% - 6px),
    #000 calc(100% - 6px)
  );
  mask: radial-gradient(
    farthest-side,
    transparent calc(100% - 6px),
    #000 calc(100% - 6px)
  );
  box-shadow: 0 2px 8px rgba(130, 104, 255, 0.14);
  border: none;
}
.circular-timer .dot {
  width: 30px;
  height: 30px;
  border-radius: 999px;
  background: linear-gradient(135deg, #8b5cf6, #a855f7);
  border: 1px solid rgba(130, 104, 255, 0.25);
}

/* Cursor adjustments */
.image-card .document-wrapper {
  cursor: zoom-in;
}
.document-wrapper.magnifier-active {
  cursor: none;
}
.learning-card {
  cursor: default;
}
.book-demo-btn {
  cursor: pointer;
}

/* Align the content box (blue area) of document-container with learning card bottom */
.play-panel .document-container {
  padding-bottom: 0 !important;
}

/* Slightly raise the time-remaining bar above the image */
.play-panel .time-remaining {
  margin-bottom: 22px;
}
/* Now that timer is top-aligned in grid row 1, keep its spacing compact */
#time-remaining {
  margin-bottom: 10px;
}

/* Scrollable root with snap sections */
.scroll-root {
  height: 100vh;
  width: 100vw;
  overflow-y: auto;
  overflow-x: hidden;
  scroll-snap-type: y mandatory;
  scrollbar-width: none; /* Firefox */
}
.scroll-root::-webkit-scrollbar {
  display: none;
} /* WebKit */
.snap-section {
  min-height: 100vh;
  width: 100vw;
  scroll-snap-align: start;
  position: relative;
}
/* Keep the purple background consistent */
.snap-section,
.snap-section.next-section {
  background: radial-gradient(
      1100px 720px at 12% 88%,
      rgba(139, 92, 246, 0.28),
      transparent 62%
    ),
    radial-gradient(
      900px 600px at 84% 22%,
      rgba(168, 85, 247, 0.24),
      transparent 62%
    ),
    linear-gradient(180deg, #f4f1ff 0%, #ffffff 100%);
}

/* Downward scroll hint */
.down-scroll-hint {
  position: fixed;
  left: 50%;
  bottom: 24px;
  transform: translateX(-50%);
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.85);
  color: #2b2456;
  font-weight: 700;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  z-index: 1300;
  animation: hintPop 300ms ease-out;
}
.down-scroll-hint .arrow {
  font-size: 18px;
}
.down-scroll-hint .txt {
  font-size: 14px;
}
@keyframes hintPop {
  0% {
    opacity: 0;
    transform: translate(-50%, 10px) scale(0.97);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, 0) scale(1);
  }
}

.next-section {
  font-family: var(--app-font);
}
/* Next section content */
.next-section .next-content {
  max-width: 960px;
  margin: 0 auto;
  padding: 120px 24px 80px 24px;
  color: #0f172a;
}
.next-section .next-content h2 {
  font-size: clamp(32px, 5vw, 48px);
  margin-bottom: 12px;
}
.next-section .next-content p {
  font-size: 18px;
  color: #4b5563;
}

/* Seamless background continuity across sections */
.scroll-root,
.snap-section,
.snap-section.next-section {
  background: radial-gradient(
      1100px 720px at 12% 88%,
      rgba(139, 92, 246, 0.28),
      transparent 62%
    ),
    radial-gradient(
      900px 600px at 84% 22%,
      rgba(168, 85, 247, 0.24),
      transparent 62%
    ),
    linear-gradient(180deg, #f4f1ff 0%, #ffffff 100%) !important;
}

/* Keep hint unobtrusive, fade if shown repeatedly */
.down-scroll-hint {
  transition: opacity 200ms ease;
}

/* Fixed seamless background layer */
.bg-layer {
  position: fixed;
  inset: 0;
  z-index: 0; /* behind everything */
  pointer-events: none;
  background: radial-gradient(
      1100px 720px at 12% 88%,
      rgba(139, 92, 246, 0.28),
      transparent 62%
    ),
    radial-gradient(
      900px 600px at 84% 22%,
      rgba(168, 85, 247, 0.24),
      transparent 62%
    ),
    linear-gradient(180deg, #f4f1ff 0%, #ffffff 100%);
}

/* Ensure content sits above bg */
.App,
.scroll-root,
.snap-section,
.screen {
  position: relative;
  z-index: 1;
}

/* Scroll root styling */
.scroll-root {
  height: 100vh;
  width: 100vw;
  overflow-y: auto;
  overflow-x: hidden;
  scroll-snap-type: y mandatory;
  background: transparent !important; /* rely on fixed bg layer */
}
.snap-section {
  min-height: 100vh;
  width: 100vw;
  scroll-snap-align: start;
  position: relative;
  background: transparent !important; /* rely on fixed bg layer */
}

/* Hint */
.down-scroll-hint {
  transition: opacity 200ms ease;
}

/* Parallax layer: subtle moving glow */
.bg-parallax {
  position: fixed;
  inset: 0;
  z-index: 0; /* same as bg-layer; bg-layer renders first; both under content */
  pointer-events: none;
  transform: translateY(0);
  background: radial-gradient(
      640px 480px at 70% 30%,
      rgba(130, 104, 255, 0.18),
      transparent 62%
    ),
    radial-gradient(
      820px 560px at 20% 90%,
      rgba(160, 120, 255, 0.16),
      transparent 62%
    );
  mix-blend-mode: normal;
}

/* Ensure content sits above bg layers */
.App,
.scroll-root,
.snap-section,
.screen,
.game-grid {
  position: relative;
  z-index: 1;
}

/* Override: screens are transparent so fixed bg is continuous */
.countdown-screen,
.screen.game-screen {
  background: transparent !important;
}

/* Remove app-level bg layers; rely on body::before */
.bg-layer,
.bg-parallax {
  display: none !important;
}
.countdown-screen,
.screen.game-screen,
.snap-section,
.scroll-root {
  background: transparent !important;
}

/* Remove any per-screen backgrounds and edges that could create seams */
.countdown-screen,
.screen.game-screen {
  background: transparent !important;
  box-shadow: none !important;
}
.game-grid {
  margin: clamp(96px, 11vh, 164px) auto 0; /* slightly larger, still dynamic */
  padding-bottom: 0;
}
.snap-section {
  padding: 0;
}

/* Overlap next section by 2px to eliminate any visible seam between sections */
.snap-section.next-section {
  margin-top: -2px;
}

/* Feather the boundary where the next section begins to hide any seam */
.snap-section.next-section {
  position: relative;
}
.snap-section.next-section::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: -8px;
  height: 16px;
  pointer-events: none;
  background: linear-gradient(
    to bottom,
    rgba(244, 241, 255, 0.9),
    rgba(244, 241, 255, 0)
  );
  z-index: 0;
}

#section-next,
#section-next .next-content {
  position: relative;
  z-index: 1;
}

/* First section: top half white with curved beveled transition into global gradient */
#section-game {
  position: relative;
  overflow: visible;
}
#section-game::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background:
    /* soft highlight around the fold */ radial-gradient(
      140% 160px at 50% 52vh,
      rgba(255, 255, 255, 0.95) 0%,
      rgba(255, 255, 255, 0) 65%
    ),
    /* left bevel */
      radial-gradient(
        180px 50% at -40px 48vh,
        rgba(255, 255, 255, 0.85) 0%,
        rgba(255, 255, 255, 0.6) 30%,
        rgba(255, 255, 255, 0) 65%
      ),
    /* right bevel */
      radial-gradient(
        180px 50% at calc(100% + 40px) 48vh,
        rgba(255, 255, 255, 0.85) 0%,
        rgba(255, 255, 255, 0.6) 30%,
        rgba(255, 255, 255, 0) 65%
      ),
    /* bottom-left bevel */
      radial-gradient(
        320px 200px at -80px 100%,
        rgba(255, 255, 255, 0.75) 0%,
        rgba(255, 255, 255, 0.45) 32%,
        rgba(255, 255, 255, 0) 72%
      ),
    /* bottom-right bevel */
      radial-gradient(
        320px 200px at calc(100% + 80px) 100%,
        rgba(255, 255, 255, 0.75) 0%,
        rgba(255, 255, 255, 0.45) 32%,
        rgba(255, 255, 255, 0) 72%
      ),
    /* top half solid white fading into bottom purple */
      linear-gradient(
        to bottom,
        #ffffff 0%,
        #ffffff 50vh,
        rgba(255, 255, 255, 0) 50vh
      ),
    /* base: slightly stronger purple at the bottom half */
      linear-gradient(
        to bottom,
        rgba(244, 241, 255, 0) 0%,
        rgba(139, 92, 246, 0.16) 60vh,
        rgba(139, 92, 246, 0.2) 100%
      );
}

/* Remove previous seam workarounds; rely on split overlay above */
.snap-section.next-section {
  margin-top: 0;
}
.snap-section.next-section::before {
  content: none !important;
}

/* Double the image card as a soft purple shadow behind */
.image-card {
  position: relative;
  z-index: 1;
}
.image-card::before {
  content: none !important; /* replaced by wrapper-attached double layers below */
}
.image-card .document-wrapper {
  position: relative;
  z-index: 1;
}
/* Disable old bottom ovals so the new doubled card is the main shadow */
.image-card::after,
.document-container::after {
  content: none !important;
}

/* Shadow duplicate: sits behind, slightly larger and lower with purple tint */
.image-card-shadow {
  position: absolute;
  inset: 0;
  transform: translateY(
      calc(
        var(--image-card-y-nudge, -6vh) + var(--image-card-shadow-offset, 1.2vh)
      )
    )
    scale(1.03);
  filter: drop-shadow(0 18px 24px rgba(130, 104, 255, 0.25));
  z-index: 0;
  pointer-events: none;
}
.image-card-shadow .document-wrapper.shadow-only {
  width: 100%;
  height: 100%;
  border-radius: 12px;
  background: rgba(130, 104, 255, 0.18);
}
/* Make sure primary card is above */
.image-card {
  position: relative;
  z-index: 1;
}

/* Keep slide animations in sync for shadow-only */
.document-wrapper.shadow-only.slide-left {
  animation: slideOutLeft 0.75s ease-in-out forwards;
}
.document-wrapper.shadow-only.slide-right {
  animation: slideOutRight 0.75s ease-in-out forwards;
}

/* Double shadow layers that follow the primary wrapper's transforms */
.document-wrapper.primary {
  z-index: 1;
  position: relative;
  overflow: visible;
}
/* Double card-like shadow elements behind the wrapper (follow transforms) */
.document-wrapper.primary::before,
.document-wrapper.primary::after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  height: 100%;
  border-radius: 1.5rem;
  z-index: 0; /* under image */
  pointer-events: none;
}
.document-wrapper.primary::before {
  top: 0.6rem;
  height: calc(100% + 1.2rem);
  width: calc(100% - 1.2rem);
  background-color: rgba(139, 92, 246, 0.14); /* softer purple */
  filter: drop-shadow(0 20px 13px rgba(139, 92, 246, 0.18))
    drop-shadow(0 8px 5px rgba(139, 92, 246, 0.16));
}
.document-wrapper.primary::after {
  top: 1.6rem;
  height: calc(100% + 2.4rem);
  width: calc(100% - 2.4rem);
  background-color: rgba(109, 40, 217, 0.12); /* softer deeper layer */
  filter: drop-shadow(0 20px 13px rgba(109, 40, 217, 0.18))
    drop-shadow(0 8px 5px rgba(109, 40, 217, 0.16));
  z-index: -1; /* second layer deeper */
}
/* Bottom-only double shadow elements under the image card */
.image-card::before,
.image-card::after {
  content: none; /* disable bottom ovals to avoid clashing with double shadow blocks */
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 999px;
  z-index: 0;
  pointer-events: none;
}
.image-card::before {
  bottom: -14px;
  height: 24px;
  width: 88%; /* centered, narrower than card so not visible on sides */
  background: rgba(130, 104, 255, 0.28);
  filter: blur(18px);
}
.image-card::after {
  bottom: -24px;
  height: 22px;
  width: 74%; /* deeper, even narrower layer */
  background: rgba(130, 104, 255, 0.18);
  filter: blur(26px);
}
/* Ensure the image stays above the pseudo-layers */
.image-card .document-image {
  position: relative;
  z-index: 1;
}

/* Merged educational text */
.edu-merged {
  margin-top: 8px;
  color: #4b5563;
  font-family: var(--app-font);
}

/* Merged educational text - slightly smaller */
.copy-panel .learning-card .learning-content .edu-merged {
  font-size: 15px !important;
  line-height: 1.45 !important;
  color: #4b5563 !important;
  margin-top: 6px;
  font-family: var(--app-font) !important;
}

/* Ensure EDU Simple block uses the same hero font */
.edu-simple {
  font-family: var(--app-font) !important;
}
.edu-simple * {
  font-family: inherit !important;
}

/* Tighter learning content spacing */
.copy-panel .learning-card {
  padding: 14px 14px 16px 14px !important;
}
.copy-panel .learning-card .feedback-header {
  margin-bottom: 0 !important;
}
.copy-panel .learning-card .feedback-body {
  margin-top: -4px !important;
  padding: 8px 12px !important;
  font-size: 15px !important;
  line-height: 1.45 !important;
}
.copy-panel .learning-card .feedback-body h4 {
  margin-bottom: 4px !important;
}
.copy-panel .learning-card .document-info {
  margin-bottom: 6px !important;
}
.copy-panel .learning-card .learning-content p {
  margin: 6px 0 8px 0 !important;
}

/* Nudge top-right CTA slightly left */
.header-cta {
  right: 20px;
}

/* Very tiny margin for learning content so feedback body is closer to the edge */
.copy-panel .learning-card .learning-content {
  margin: 2px !important;
}
.copy-panel .learning-card .feedback-body {
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Ensure learning card height matches its content (feedback body), no extra clamp */
.copy-panel .learning-card {
  height: auto !important;
  min-height: auto !important;
  max-height: none !important;
}
.copy-panel .learning-card .learning-content {
  height: auto !important;
  max-height: none !important;
  overflow: visible !important;
}

/* When visible, make the card only as tall as the feedback body */
.copy-panel .learning-card.visible {
  padding: 0 !important;
}
.copy-panel .learning-card.visible .learning-content {
  padding: 0 !important;
  margin: 0 !important;
}
.copy-panel .learning-card.visible .feedback-header {
  position: absolute !important;
  top: 0;
  left: 0;
  margin: 0 !important;
  z-index: 2;
}
.copy-panel .learning-card.visible .feedback-body {
  margin-top: 0 !important;
  padding: 34px 12px 8px 12px !important; /* room for absolute header */
}

/* Vertical Position Pill */
.position-pill {
  width: 88px;
  border-radius: 16px; /* match learning card */
  background: #ffffff !important; /* match learning card */
  border: 1px solid #e5e7eb !important; /* match learning card */
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  padding: 10px 10px 14px 10px;
}
.position-pill .pill-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}
.position-pill .pill-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}
.position-pill .pill-title {
  font-size: 12px;
  color: #6b7280;
  text-transform: lowercase;
}
.position-pill .pill-value {
  font-size: 18px;
  font-weight: 800;
  color: #111827;
}
.position-pill .pill-delta {
  font-size: 14px;
  font-weight: 800;
  color: #22c55e;
  background: #e8f9f0;
  border: 1px solid #bbf7d0;
  padding: 2px 8px;
  border-radius: 999px;
  line-height: 1;
  animation: deltaPop 600ms ease;
}
@keyframes deltaPop {
  0% {
    transform: translateY(8px) scale(0.9);
    opacity: 0;
  }
  40% {
    transform: translateY(-2px) scale(1.05);
    opacity: 1;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}
.position-pill .pill-track {
  position: relative;
  width: 36px;
  height: 180px;
  border-radius: 999px;
  background: #e5e7eb;
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.08);
}
.position-pill .pill-fill {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(180deg, #8b5cf6, #a855f7);
  height: 30%;
  transition: height 240ms ease;
}
.position-pill .pill-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  margin-top: 4px;
}
.position-pill .pill-icon {
  width: 26px;
  height: 26px;
  display: grid;
  place-items: center;
  border-radius: 999px;
  background: #f3f4f6;
}
.position-pill .pill-icon img {
  width: 16px;
  height: 16px;
  display: block;
}
